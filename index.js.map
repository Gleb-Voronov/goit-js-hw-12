{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49662945-8e09ebd816e6f5a1c3c1cc874';\n\nexport default function getImagesByQuery(query, page = 1) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  return axios(`https://pixabay.com/api/?${params}`);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-js');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport function createGallery(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n  if (!append) {\n    gallery.innerHTML = ''; // Очищаємо галерею, якщо не додаємо зображення\n  }\n  gallery.innerHTML += images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"item-link\" href=\"${largeImageURL}\">\n            <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <ul class=\"statistic-list\">\n              <li class=\"statistic-item\">\n                <p class=\"statistic-text\">Likes</p>\n                <p class=\"statistic-value\">${likes}</p>\n              </li>\n              <li class=\"statistic-item\">\n                <p class=\"statistic-text\">Views</p>\n                <p class=\"statistic-value\">${views}</p>\n              </li>\n              <li class=\"statistic-item\">\n                <p class=\"statistic-text\">Comments</p>\n                <p class=\"statistic-value\">${comments}</p>\n              </li>\n              <li class=\"statistic-item\">\n                <p class=\"statistic-text\">Downloads</p>\n                <p class=\"statistic-value\">${downloads}</p>\n              </li>\n            </ul>\n          </a>\n        </li>\n      `\n    )\n    .join('');\n\n\n\n  new SimpleLightbox('.gallery li a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.add('loader');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('loader');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function scrollToNewImages() {\n  const firstNewImage = gallery.querySelector('.gallery-item');\n  if (firstNewImage) {\n    window.scrollBy({\n      top: firstNewImage.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api';\nimport {\n  createGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader-js');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  currentQuery = event.target.elements.text.value.trim();\n  if (!currentQuery) {\n    return;\n  }\n\n  currentPage = 1;\n  showLoader();\n\n  try {\n    const response = await getImagesByQuery(currentQuery, currentPage);\n    const images = response.data.hits;\n    if (images.length === 0) {\n      iziToast.warning({\n        message: 'На жаль, за вашим запитом нічого не знайдено. Спробуйте інший запит!',\n        messageColor: '#ffffff',\n      });\n      loadMoreBtn.style.display = 'none'; \n      clearGallery()\n      hideLoader();\n      return;\n    }\n    createGallery(images);\n    if (response.data.totalHits > currentPage * 15) {\n      loadMoreBtn.style.display = 'block';\n    }\n    hideLoader();\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nasync function loadMoreImages() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const response = await getImagesByQuery(currentQuery, currentPage);\n    const images = response.data.hits;\n    if (images.length === 0) {\n      loadMoreBtn.style.display = 'none'; \n      iziToast.info({\n        message: \"На жаль, ви досягли кінця результатів пошуку.\",\n        messageColor: '#ffffff',\n      });\n      hideLoader();\n      return;\n    }\n    createGallery(images, true); \n    if (response.data.totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        message: \"На жаль, ви досягли кінця результатів пошуку.\",\n        messageColor: '#ffffff',\n      });\n    }\n    hideLoader();\n    scrollToNewImages();\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nfunction scrollToNewImages() {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n  const lastItem = galleryItems[galleryItems.length - 1];\n  if (lastItem) {\n    const { top } = lastItem.getBoundingClientRect();\n    window.scrollBy({\n      top: top - 100,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","getImagesByQuery","query","page","params","axios","gallery","loader","createGallery","images","append","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","form","loadMoreBtn","currentPage","currentQuery","handleSubmit","loadMoreImages","event","response","iziToast","error","scrollToNewImages","galleryItems","lastItem","top"],"mappings":"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"}